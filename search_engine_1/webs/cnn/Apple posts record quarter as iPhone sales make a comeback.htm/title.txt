Apple posts record quarter as iPhone sales make a comeback